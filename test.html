<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      div {
        background: red;
        width: 200px;
        height: 200px;
      }
      /* #div{
        float: left;
        background: green;
      } */
      #parent{
        width: 500px;
        height: 500px;
        background: blue;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
      }
      /* #children{
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
      } */
      /* #children{
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        margin: auto;
      } */
      .flex-box {
        display: flex;
        /* flex-flow: column wrap; */
        justify-content: center;
        align-items: stretch;
        width: 500px;
        height: 500px;
        background: #000;
      }
    </style>
  </head>
  <body>
    <p id="p">123123</p>
    <div id="parent">
      <div id="children"></div>
    </div>
    <section class="flex-box">
      <div></div>
      <div></div>
    </section>
    <script>
      function myCall(context, ...args) {
        const self = context || window;
        self.fn = this;
        const result = self.fn(...args);
        delete self.fn;
        return result;
      }

      function myBind(context, ...bindArgs) {
        // 保存当前函数，因为bind需要返回一个新的函数，在新的函数里this指向会有问题
        const self = this;
        // 不使用原生的call方法，使用自己写的 myCall 方法
        return function (...args) {
          Function.prototype.myCall = myCall;
          console.log([...bindArgs], [...args]);
          return self.myCall(context, ...bindArgs, ...args);
        };
      }
      Function.prototype.myBind = myBind;

      let obj = {
        name: 'jack',
        age: 18,
      };
      function getAge(desc, desc1, desc2) {
        console.log(desc, desc1, desc2);
        return this.age;
      }
      let myGetAge = getAge.myBind(obj, 'myBind调用', '参数1');
      console.log(getAge('正常调用', '参数1', '参数2'));
      // 正常调用 参数1 参数2
      // undefined
      console.log(myGetAge('参数2'));
      // myBind调用 参数1 参数2
      // 18
      div.addEventListener('click', (e) => {
        console.log(e)
        console.log(e.type)
      })

      function deepClone(obj) {
        if(obj === null) return obj;
        if(obj instanceof Date) return new Date(obj);
        if(obj instanceof RegExp) return new RegExp(obj);
        if(typeof obj !== 'object') return obj;
        let result = Array.isArray(obj) ? [] : {};
        for(let key in obj) {
          if(obj.hasOwnProperty(key)) {
            result[key] = deepClone(obj[key]);
          }
        }
        return result;
      }
    </script>
  </body>
</html>
